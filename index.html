<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#2563eb" />
  <title>billzy ‚Äî Split receipts instantly</title>
  <link rel="stylesheet" href="css/main.css" />
</head>
<body>
  <header class="header">
    <div class="header-left">
      <h1 class="logo">billzy</h1>
      <p class="tagline">Scan ‚Üí Parse ‚Üí Split. Instant, private, done.</p>
    </div>
    <div class="header-right">
      <button type="button" class="btn-currency" id="currency-btn" aria-haspopup="true" aria-expanded="false" aria-controls="currency-menu">
        <span class="currency-symbol" id="currency-display">$</span>
        <span class="currency-code" id="currency-code-display">USD</span>
        <span class="currency-chevron" aria-hidden="true">‚ñº</span>
      </button>
      <div class="currency-menu hidden" id="currency-menu" role="menu">
        <div class="currency-menu-list" id="currency-menu-list"></div>
        <button type="button" class="currency-menu-custom" id="currency-custom-btn">+ Add custom currency</button>
      </div>
    </div>
  </header>

  <main class="main">
    <!-- Upload -->
    <section class="panel upload-panel" id="upload-panel">
      <h2 class="panel-title">Upload receipts</h2>
      <div class="dropzone" id="dropzone" role="button" tabindex="0" aria-label="Drop receipt images or click to browse">
        <input type="file" id="file-input" accept="image/jpeg,image/png,image/webp" multiple hidden />
        <span class="dropzone-icon" aria-hidden="true">üì∑</span>
        <span class="dropzone-text">Drop images here or tap to browse</span>
        <span class="dropzone-hint">JPG, PNG ¬∑ Up to <span id="max-receipts-num">10</span> receipts</span>
      </div>
      <p class="receipt-count-hint" id="receipt-count-hint">0 / 10 receipts</p>
      <div class="receipt-thumbnails" id="receipt-thumbnails"></div>
      <div class="actions" id="parse-actions">
        <button type="button" class="btn btn-primary" id="parse-all-btn" disabled>Parse all receipts</button>
      </div>
    </section>

    <!-- People (collapsible on mobile) -->
    <section class="panel people-panel" id="people-panel">
      <button type="button" class="panel-toggle" id="people-toggle" aria-expanded="false" aria-controls="people-list">
        <h2 class="panel-title">Split with</h2>
        <span class="toggle-icon" aria-hidden="true"></span>
      </button>
      <p class="split-with-hint">Who‚Äôs in on the split? Add names below ‚Äî the split updates automatically. No need to re-parse.</p>
      <div class="people-list" id="people-list" hidden>
        <div class="people-slots" id="people-slots"></div>
        <div class="people-actions">
          <button type="button" class="btn btn-ghost add-person-btn" id="add-person-btn">+ Add person</button>
          <button type="button" class="btn btn-secondary btn-recalculate" id="recalculate-split-btn">Recalculate split</button>
        </div>
        <p class="people-hint">Up to 20 people. Names are for this session only.</p>
      </div>
    </section>

    <!-- Parsing feedback / warnings -->
    <section class="panel warnings-panel hidden" id="warnings-panel">
      <h2 class="panel-title warnings-title">
        <span class="icon-warning" aria-hidden="true">‚ö†Ô∏è</span>
        Parsing notes
      </h2>
      <ul class="warnings-list" id="warnings-list"></ul>
    </section>

    <!-- List of items (grouped by merchant) -->
    <section class="panel table-panel hidden" id="table-panel">
      <h2 class="panel-title">List of items</h2>
      <p class="table-hint">Tap a cell to edit. Assign each item to who pays.</p>
      <div class="bill-sections" id="bill-sections"></div>
      <div class="table-meta" id="table-meta"></div>
      <button type="button" class="btn btn-ghost add-item-btn" id="add-item-btn">+ Add item</button>
    </section>

    <!-- Summary / split result -->
    <section class="panel summary-panel hidden" id="summary-panel">
      <h2 class="panel-title">Split summary</h2>
      <div class="summary-list" id="summary-list"></div>
      <div class="summary-actions">
        <button type="button" class="btn btn-primary" id="copy-btn">Copy result</button>
        <button type="button" class="btn btn-secondary" id="download-csv-btn">Download CSV</button>
        <button type="button" class="btn btn-secondary" id="download-image-btn">Download image</button>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p class="footer-notice">No account. No data stored. Everything stays on your device.</p>
    <button type="button" class="btn btn-ghost footer-report-bug" id="report-bug-btn">Report bug</button>
    <button type="button" class="footer-legal-toggle" id="legal-toggle" aria-expanded="false" aria-controls="legal-notice">Privacy & legal</button>
    <div class="footer-legal hidden" id="legal-notice" aria-hidden="true">
      <p>billzy does not collect, store, or transmit your receipts or personal data. All processing happens in your browser. This tool is for convenience only and does not constitute legal, tax, or financial advice. Use at your own discretion.</p>
    </div>
  </footer>

  <!-- Custom currency modal -->
  <div class="modal hidden" id="custom-currency-modal" role="dialog" aria-labelledby="custom-currency-title" aria-modal="true">
    <div class="modal-backdrop" id="custom-currency-backdrop"></div>
    <div class="modal-content">
      <h3 id="custom-currency-title">Add custom currency</h3>
      <label class="modal-label">Symbol (e.g. $, ‚Ç¨, ¬•)</label>
      <input type="text" class="modal-input" id="custom-currency-symbol" placeholder="$" maxlength="6" />
      <label class="modal-label">Code (e.g. USD, EUR)</label>
      <input type="text" class="modal-input" id="custom-currency-code" placeholder="USD" maxlength="6" />
      <label class="modal-label">Name (optional)</label>
      <input type="text" class="modal-input" id="custom-currency-name" placeholder="US Dollar" />
      <div class="modal-actions">
        <button type="button" class="btn btn-ghost" id="custom-currency-cancel">Cancel</button>
        <button type="button" class="btn btn-primary" id="custom-currency-save">Add & use</button>
      </div>
    </div>
  </div>

  <!-- Edit merchant modal -->
  <div class="modal hidden" id="merchant-modal" role="dialog" aria-labelledby="merchant-modal-title" aria-modal="true">
    <div class="modal-backdrop" id="merchant-modal-backdrop"></div>
    <div class="modal-content">
      <h3 id="merchant-modal-title">Merchant name</h3>
      <label class="modal-label">Name (e.g. McDonald's, Starbucks)</label>
      <input type="text" class="modal-input" id="merchant-name-input" placeholder="Receipt 1" />
      <div class="modal-actions">
        <button type="button" class="btn btn-ghost" id="merchant-cancel">Cancel</button>
        <button type="button" class="btn btn-primary" id="merchant-save">Save</button>
      </div>
    </div>
  </div>

  <!-- Edit modal (inline for item/price/quantity) -->
  <div class="modal hidden" id="edit-modal" role="dialog" aria-labelledby="edit-modal-title" aria-modal="true">
    <div class="modal-backdrop" id="edit-modal-backdrop"></div>
    <div class="modal-content">
      <h3 id="edit-modal-title">Edit item</h3>
      <label class="modal-label">Quantity</label>
      <input type="number" class="modal-input" id="edit-quantity" min="1" max="99" inputmode="numeric" />
      <label class="modal-label">Name</label>
      <input type="text" class="modal-input" id="edit-name" />
      <label class="modal-label">Price ($) ‚Äî total for this line</label>
      <input type="text" class="modal-input" id="edit-price" inputmode="decimal" />
      <div class="modal-actions">
        <button type="button" class="btn btn-ghost" id="edit-cancel">Cancel</button>
        <button type="button" class="btn btn-primary" id="edit-save">Save</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
